<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title id="pageTitle">VoxePay - Earn Ads</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="//libtl.com/sdk.js" data-zone="10235668" data-sdk="show_10235668"></script>
<style>
/* --- RENG DEYÄ°ÅENLERÄ° (GÃ¶y/QÄ±rmÄ±zÄ±/Qara) --- */
:root {
  /* â­ï¸ DEYÄ°ÅÄ°KLÄ°K: LIGHT TEMA ARTIQ GÃ–Y/BENÃ–VÅEYÄ° GRADÄ°ENTDÄ°R */
  --primary-color: #007bff;   /* Esas reng: GÃ¶y */
  --accent: #dc3545;          /* VurÄŸu rengi: QÄ±rmÄ±zÄ± */
  
  --bg-start: #e0f7fa;        /* AÃ§Ä±q GÃ¶y Fon (BenÃ¶vÅŸeyi qarÄ±ÅŸÄ±ÄŸÄ±) */
  --bg-end: #f3e5f5;          /* AÃ§Ä±q BenÃ¶vÅŸeyi Fon (BenÃ¶vÅŸeyi qarÄ±ÅŸÄ±ÄŸÄ±) */
  
  --card-bg: rgba(255, 255, 255, 0.95); 
  --card-border: rgba(0, 0, 0, 0.1);
  --text-light: #ffffff;
  --text-dark: #1B1B1B;
  --menu-bg: rgba(255, 255, 255, 0.5);
  --progress-bg: rgba(0, 0, 0, 0.08);
  --input-text: #1B1B1B;

  --btn-gradient-start: #007bff; 
  --btn-gradient-end: #0056b3;   
  --btn-shadow: rgba(0, 123, 255, 0.4); 
  
  --secondary-btn-gradient-start: #28a745; 
  --secondary-btn-gradient-end: #218838;   
}

/* DARK TEMA */
body.dark-theme {
  --bg-start: #1b1b1b; 
  --bg-end: #252525;   
  --card-bg: rgba(45, 45, 45, 0.95); 
  --card-border: rgba(255, 255, 255, 0.15);
  --text-light: #ffffff;
  --text-dark: #f0f0f0;
  
  --primary-color: #4da6ff; 
  --accent: #ff4b2b;       
  
  --menu-bg: rgba(0, 0, 0, 0.4);
  --progress-bg: rgba(255, 255, 255, 0.15);
  --input-text: #ffffff;

  --btn-gradient-start: #4da6ff; 
  --btn-gradient-end: #007bff;   
  --secondary-btn-gradient-start: #1e7e34;
  --secondary-btn-gradient-end: #28a745; 
}

/* --- ÃœMUMÄ° STÄ°LLER --- */
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Inter',sans-serif;
  /* Fond rengi her zaman yuxarÄ±dakÄ± DEYÄ°ÅENLERDEN gelir (light-theme Ã¼Ã§Ã¼n indi GÃ¶y/BenÃ¶vÅŸeyidir) */
  background:linear-gradient(135deg,var(--bg-start),var(--bg-end));
  background-size:400% 400%;
  animation:bgMove 12s ease infinite;
  color:var(--text-dark);
  min-height:100vh;
  user-select:none;
  -webkit-user-select:none;
  -webkit-tap-highlight-color:transparent;
  transition: background-color 0.5s, color 0.5s; 
}
@keyframes bgMove{
  0%{background-position:0% 50;}
  50%{background-position:100% 50;}
  100%{background-position:0% 50;}
}

.container{max-width:480px;margin:auto;padding:20px;padding-top:20px;} 

.top-controls {
    display: flex;
    justify-content: flex-end; 
    align-items: center;
    margin-bottom: 20px;
}
.theme-toggle-btn {
    padding: 6px 10px;
    border: 1px solid var(--card-border);
    background: var(--card-bg);
    color: var(--text-dark);
    font-weight: 700;
    cursor: pointer;
    transition: 0.3s;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    height: 40px; 
}
.theme-icon { font-size: 20px; }

.page{display:none;animation:fadeIn .4s ease;}
.page.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* Balans ve Kart DizaynÄ± */
.balance-card, .ad-card, .task-card, .method-card{
  background:var(--card-bg);
  border-radius:25px;
  padding:20px 18px;
  margin-bottom:20px;
  box-shadow:0 12px 40px rgba(0,0,0,0.25);
  backdrop-filter:blur(14px);
  text-align:center;
  border:1px solid var(--card-border);
  transition: background-color 0.5s, box-shadow 0.5s;
}
.balance-card h3{font-size:16px;color:var(--primary-color);margin-bottom:8px;letter-spacing:0.5px;}
.balance-card .amount{font-size:32px;font-weight:800;margin-top:5px;color:var(--text-dark);text-shadow:0 2px 5px rgba(0,0,0,0.1);}


/* Task Card DÄ°ZAYNININ GÃ–ZELLEÅDÄ°RÄ°LMESÄ° */
.task-card {
    background: linear-gradient(145deg, var(--card-bg) 70%, rgba(40, 167, 69, 0.1)); 
    border-radius: 20px;
    padding: 25px;
    margin-bottom: 18px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    text-align: left; 
    display: flex;
    flex-direction: column;
}
.task-header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}
.task-header h2 {
    font-size: 18px;
    color: var(--secondary-btn-gradient-end); 
    font-weight: 800;
    margin: 0;
}
.task-icon {
    font-size: 24px;
    margin-right: 10px;
    color: var(--secondary-btn-gradient-end);
}
.task-card p{margin:2px 0;color:var(--text-dark);font-size:13px;}


/* Task Button Styles */
.task-card button{
    width:100%;margin-top:15px;padding:12px;font-size:14px;font-weight:700;border:none;border-radius:15px;
    background:linear-gradient(90deg,var(--secondary-btn-gradient-start),var(--secondary-btn-gradient-end)); 
    color:var(--text-light);cursor:pointer;transition:0.3s;
}
.task-card button:hover:not(:disabled){transform:scale(1.03);box-shadow:0 0 20px rgba(40, 167, 69, 0.6);}
.task-card button.completed{background:gray !important;box-shadow:none !important;cursor:not-allowed !important;opacity:0.55;}
.task-card button.waiting { background: orange !important; cursor: wait !important; opacity: 0.8; }

.stats{display:flex;justify-content:space-around;margin-top:12px;}
.stat{background:var(--progress-bg);border-radius:10px;padding:10px 16px;}
.stat span{display:block;font-size:16px;font-weight:700;color:var(--text-dark);}
.stat label{font-size:11px;color:var(--text-dark);opacity:0.7;}
.progress{height:10px;background:var(--progress-bg);border-radius:6px;overflow:hidden;margin-top:12px;}
.progress-fill{height:100%;background:var(--primary-color);width:0%;transition:width .4s;} 

/* Ad Button Styles */
.ad-btn{
    width:100%;
    margin-top:12px;
    padding:12px;
    font-size:14px;
    font-weight:700;
    border:none;
    border-radius:14px;
    color:var(--text-light);
    cursor:pointer;
    transition:0.3s;
    /* GÃ¶y rengde gradient */
    background:linear-gradient(90deg,var(--btn-gradient-start),var(--btn-gradient-end));
    box-shadow:0 0 16px var(--btn-shadow);
    position: relative; 
    overflow: hidden; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
}
.ad-btn:hover:not(.watching):not(:disabled){transform:scale(1.03);box-shadow:0 0 20px var(--btn-shadow);}
.ad-btn:disabled{background:gray !important;box-shadow:none !important;cursor:not-allowed !important;opacity:0.55;}

.menu{position:fixed;bottom:15px;left:50%;transform:translateX(-50%);width:92%;max-width:460px;display:flex;justify-content:space-around;background:var(--menu-bg);padding:10px;border-radius:22px;box-shadow:0 6px 20px rgba(0,0,0,.3);backdrop-filter:blur(8px);}
.menu button{flex:1;margin:0 6px;padding:12px;border:none;border-radius:16px;background:linear-gradient(90deg,var(--btn-gradient-start),var(--btn-gradient-end));color:var(--text-light);font-weight:700;transition:0.3s;}
/* Active menu button accent color: QÄ±rmÄ±zÄ± */
.menu button.active{
    /* QÄ±rmÄ±zÄ± dizayn seÃ§imi tetbiq edildi */
    background:linear-gradient(90deg,var(--accent), #ff8080);
    box-shadow:0 0 18px rgba(220, 53, 69, 0.6);
}

/* --- AD BUTTON Ä°Ã‡Ä°NDE OLAN DÄ°NAMÄ°K TÄ°MER BAR CSS --- */
.ad-btn.watching {
    padding: 0; 
    background: var(--progress-bg); 
    box-shadow: none;
}
.ad-btn-content {
    position: relative;
    z-index: 2;
    padding: 12px; 
    width: 100%;
    text-align: center;
    color: var(--text-dark); 
    font-weight: 600;
}
.ad-btn.watching .ad-btn-content {
    color: var(--text-dark); 
    font-weight: 600;
}
.ad-timer-bar {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    /* QÄ±rmÄ±zÄ± timer barÄ± */
    background: linear-gradient(90deg, var(--accent), #ff8080); 
    transition: width 1s linear; 
    border-radius: 14px;
    z-index: 1;
}

.alert{margin-top:10px;padding:10px;border-radius:10px;display:none;font-weight: 600;}
.alert.error{background:#f8d7da;color:#842029;}
.alert.success{background:#d1e7dd;color:#0f5132;}

/* --- WALLET SEHÄ°FESÄ° STÄ°LLERÄ° --- */
.method-card {
    display: flex;
    align-items: center;
    text-align: left;
    cursor: pointer;
    padding: 15px 20px;
    margin-bottom: 12px; 
}
.method-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 16px 45px rgba(0,0,0,0.3);
}
.method-logo {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    margin-right: 15px;
    object-fit: cover; 
    flex-shrink: 0; 
}
.method-info {
    flex-grow: 1;
}
.method-text {
    display: block;
    font-size: 18px;
    font-weight: 700;
    color: var(--text-dark);
}
.method-subtext {
    display: block;
    font-size: 12px;
    color: var(--primary-color);
    opacity: 0.8;
    margin-top: 2px;
}
#walletForm {
    display: none; 
    padding: 20px;
    background: var(--card-bg);
    border-radius: 25px;
    box-shadow: 0 12px 40px rgba(0,0,0,0.25);
    margin-top: 20px; 
}
#walletForm input {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    border: 1px solid var(--card-border);
    border-radius: 10px;
    background: var(--progress-bg);
    color: var(--input-text);
    font-size: 14px;
}
#walletForm button {
    width: 100%;
    padding: 12px;
    font-weight: 700;
    border: none;
    border-radius: 14px;
    color: var(--text-light);
    cursor: pointer;
    transition: 0.3s;
}
#withdrawBtn {
    /* QÄ±rmÄ±zÄ± Ã§Ä±xarÄ±ÅŸ dÃ¼ymesi */
    background: linear-gradient(90deg, var(--accent), #ff4b2b);
    margin-top: 15px;
}
#backBtn {
    /* Geri dÃ¼ymesi yenidÉ™n GÃ–Y edildi */
    background: linear-gradient(90deg, var(--btn-gradient-start), var(--btn-gradient-end));
    color: var(--text-light); /* Metn aÄŸ olsun */
    margin-bottom: 20px;
    box-shadow: 0 4px 10px var(--btn-shadow);
}
#backBtn:hover {
     transform: scale(1.03); 
}

/* --- LOADING SCREEN DÃœZELDÄ°LMÄ°Å STÄ°L --- */
#loadingScreen{
    position:fixed;
    top:0; 
    left:0;
    width:100%; 
    height:100%;
    /* Loading Screen Fonu (GÃ¶y/QÄ±rmÄ±zÄ±) - DEYÄ°ÅMEDÄ° */
    background:linear-gradient(135deg, var(--primary-color), var(--accent));
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:99999;
    backdrop-filter:blur(6px);
    transition:opacity .7s ease;
    opacity: 1; 
}
.loader-box{text-align:center;position:relative;}
.loader-title{font-size:40px;font-weight:900;color:#fff; letter-spacing:2px;text-shadow:0 0 12px rgba(0,0,0,0.5);}
.loader-bar{width:300px;height:16px;border-radius:20px;background:rgba(255,255,255,0.15);overflow:hidden;position:relative;box-shadow:0 0 14px rgba(255,255,255,0.3);margin-top:32px;}
/* Loading bar rengi aÄŸ fon Ã¼Ã§Ã¼n uyÄŸunlaÅŸdÄ±rÄ±ldÄ± */
.loader-fill{height:100%;width:0%;border-radius:20px;background:linear-gradient(90deg,#e0f7fa,#f3e5f5); animation:fillAnim 3s forwards ease-in-out;}
@keyframes fillAnim{from{width:0%;}to{width:100%;}}
.loader-text{margin-top:14px;font-size:17px;color:#fff;letter-spacing:1px;}
</style>
</head>
<body id="body">
<div id="loadingScreen">
  <div class="loader-box">
    <div class="loader-title">VoxePay</div> 
    <div class="loader-bar">
      <div class="loader-fill"></div>
    </div>
    <div class="loader-text">Loading...</div>
  </div>
</div>

<div class="container">
  
  <div class="top-controls">
    <button class="theme-toggle-btn" onclick="toggleTheme()">
        <span id="themeIcon" class="theme-icon">ğŸ”†</span>
    </button>
  </div>
  
  <div id="homePage" class="page active">
    <div class="balance-card">
      <h3>Your Current Balance</h3>
      <div class="amount"><span id="balance">0.0000</span> <span id="currencySymbol">$</span></div>
    </div>

    <div class="ad-card">
      <h2>Daily Ads</h2>
      <p>Earn <b>$0.001</b> for every ad watched!</p>
      <div class="stats">
        <div class="stat"><span id="adsCount">0</span><label>Watched</label></div>
        <div class="stat"><span>100</span><label>Maximum</label></div>
      </div>
      <div class="progress"><div class="progress-fill" id="progress"></div></div>
      <p style="margin-top:6px;">Progress: <span id="progressTextSpan">0/100</span></p>
      
      <button id="adBtn" class="ad-btn">Watch Ad</button>
      
      <div id="msg" style="margin-top: 10px;"></div> 
    </div>
  </div>

  <div id="tasksPage" class="page">
    
    <div class="task-card">
        <div class="task-header">
            <span class="task-icon">ğŸ“¢</span>
            <h2>Join Channel</h2>
        </div>
      <p>Join our official Telegram channel and earn a quick bonus!</p>
      <p>Reward: <b>$0.10</b></p>
      <button id="joinBtn">Go to Channel</button>
    </div>
    
    </div>

  <div id="walletPage" class="page">
    <div class="balance-card">
      <h3>Your Balance</h3>
      <div class="amount"><span id="balance2">0.0000</span> <span id="currencySymbol2">$</span></div>
    </div>
    <h2 style="text-align:center;margin-bottom:20px;color:var(--text-dark);font-size:22px;">Select Withdrawal Method</h2>
    
    <div id="methodsList">
        <div class="method-card" id="usdtMethodCard">
            <img src="https://i.postimg.cc/gjtCGQLj/BLOG-USDT-on-TON.jpg" alt="USDT on TON Logo" class="method-logo">
            <div class="method-info">
                <span class="method-text">USDT (TON Network)</span>
                <span class="method-subtext">Minimum $1.50</span>
            </div>
        </div>
    </div>

    <div class="form" id="walletForm">
        <button id="backBtn">â¬… Back to Methods</button>
        <h3 style="margin-bottom: 15px; color: var(--primary-color); text-align: center;">USDT (TON) Withdrawal</h3>
        <input id="details" placeholder="Enter your TON address">
        <input id="amount" type="number" placeholder="Amount (USD) - Min $1.50">
        <button id="withdrawBtn">Withdraw</button>
        <div id="alert" class="alert"></div>
    </div>
    
  </div>

</div>

<div class="menu">
  <button onclick="showPage('homePage',this)" class="active">Home</button>
  <button onclick="showPage('tasksPage',this)">Tasks</button>
  <button onclick="showPage('walletPage',this)">Wallet</button>
</div>
<script>
// --- KONSTANTLAR ---
const AD_REWARD = 0.001; // $
const DAILY_AD_LIMIT = 100;
const TASK_REWARD = 0.10; // $
// â­ï¸ DÆYÄ°ÅÄ°KLÄ°K: Minimum Ã§Ä±xarÄ±ÅŸ $1.50 olaraq yenilÉ™ndi
const MIN_WITHDRAWAL = 1.50; // $
const TG_CHANNEL_LINK = "https://t.me/voxepay";
const AD_WATCH_TIME = 10; // Seconds
const REWARD_TIME = AD_WATCH_TIME - 2; // MÃ¼kafat 2 saniye sonra verilir (s=8)
const TASK_WAIT_TIME = 5; // Seconds for task

// LocalStorage Keys
const BAL_KEY='voxepay_balance', COUNT_KEY='voxepay_ads_count', RESET_KEY='voxepay_reset_time';
const JOIN_KEY='voxepay_joined_tg'; 

// --- STATE MANAGEMENT ---
function safeGet(k,d=0){try{return JSON.parse(localStorage.getItem(k))??d;}catch{return d;}}
function safeSet(k,v){try{localStorage.setItem(k,JSON.stringify(v));}catch(e){}}

let bal=parseFloat(safeGet(BAL_KEY,0));
let cnt=parseInt(safeGet(COUNT_KEY,0));
let resetTime=safeGet(RESET_KEY,null);
let isWatchingAd = false;

// GÃ¼ndelik sÄ±fÄ±rlanma: AZT 23:00 (UTC 19:00)
function getNextResetTime(){
  const now=new Date();
  const AZ_OFFSET=4;
  let resetUTC=new Date(Date.UTC(
    now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),
    19,0,0,0
  ));
  if(now.getTime()>resetUTC.getTime()){resetUTC.setUTCDate(resetUTC.getUTCDate()+1);}
  return resetUTC.getTime();
}

if(!resetTime||Date.now()>resetTime){
  cnt=0;
  resetTime=getNextResetTime();
  safeSet(RESET_KEY,resetTime);
  safeSet(COUNT_KEY,cnt);
}

// --- TEMA Ä°DAREETMESÄ° ---
const THEME_KEY = 'theme';
const body = document.getElementById('body');
const themeIcon = document.getElementById('themeIcon');

function applyTheme(isDark) {
    if (isDark) {
        body.classList.add('dark-theme');
        themeIcon.textContent = 'ğŸŒ™'; 
        safeSet(THEME_KEY, 'dark');
    } else {
        body.classList.remove('dark-theme');
        themeIcon.textContent = 'ğŸ”†'; 
        safeSet(THEME_KEY, 'light');
    }
}

function toggleTheme() {
    const isDark = body.classList.contains('dark-theme');
    applyTheme(!isDark);
}
const savedTheme = safeGet(THEME_KEY, 'light');
applyTheme(savedTheme === 'dark');


// --- UI YENÄ°LENMESÄ° ---
function update(){
  const formattedBal = bal.toFixed(4); 
  
  // Balans yenilenmesi
  document.getElementById('balance').textContent = formattedBal;
  document.getElementById('balance2').textContent = formattedBal;

  document.getElementById('adsCount').textContent=cnt;
  document.getElementById('progress').style.width=(cnt/DAILY_AD_LIMIT*100)+'%';
  document.getElementById('progressTextSpan').textContent = `${cnt}/${DAILY_AD_LIMIT}`;
  
  const adBtn = document.getElementById('adBtn');
  if (cnt >= DAILY_AD_LIMIT) {
      adBtn.disabled = true;
      adBtn.textContent = "Daily Limit Reached";
      adBtn.classList.remove('watching');
  } else if (!isWatchingAd) {
      adBtn.disabled = false;
      // Eger izlenmirsÉ™, dÃ¼ymenin iÃ§inde sadece metn olmalÄ±dÄ±r
      adBtn.innerHTML = "Watch Ad"; 
      adBtn.classList.remove('watching');
  } else {
      // isWatchingAd true olduqda, metn ve bar timer terefinden idare olunacaq
      adBtn.disabled = true; 
      adBtn.classList.add('watching');
  }

  const joinBtn = document.getElementById('joinBtn');
  if (localStorage.getItem(JOIN_KEY)) {
      joinBtn.classList.add('completed');
      joinBtn.textContent = 'Completed';
      joinBtn.disabled = true;
  } else {
      joinBtn.classList.remove('completed');
      joinBtn.textContent = 'Go to Channel'; 
      joinBtn.disabled = false;
  }

  safeSet(BAL_KEY,bal);
  safeSet(COUNT_KEY,cnt);
}


// --- REKLAM BUTONU MENTÄ°QÄ° (DÄ°NAMÄ°K TÄ°MER BAR Ä°LE) ---
const adBtn=document.getElementById('adBtn'), msg=document.getElementById('msg');

adBtn.onclick=()=>{
  if(cnt>=DAILY_AD_LIMIT || isWatchingAd){ return; }
  
  isWatchingAd = true;
  update(); 
  
  let s=AD_WATCH_TIME; 
  let rewarded = false;
  msg.innerHTML = ''; 

  // Dinamik timer barÄ± DÃœYMENÄ°N Ä°Ã‡Ä°NDE qururuq
  adBtn.innerHTML=`
    <div class="ad-timer-bar" style="width:100%;"></div>
    <div class="ad-btn-content">Waiting (${s}s)...</div>
  `;
  const adBtnContent = adBtn.querySelector('.ad-btn-content');
  const timerBar = adBtn.querySelector('.ad-timer-bar');
  
  try{if(typeof show_10235668==='function'){show_10235668();}}catch(e){} 

  const tInterval=setInterval(()=>{
    s--;
    
    // Timer Ã§ubuÄŸunu yenile
    if(timerBar){
        const progressPercentage = (s / AD_WATCH_TIME) * 100;
        timerBar.style.width=`${progressPercentage}%`; 
    }
    
    // DÃ¼ymenin metnini yenile
    if (adBtnContent) adBtnContent.textContent = `Waiting (${s}s)...`;
    
    // MÃ¼kafat verilmesi (2 saniye sonra)
    if(s === REWARD_TIME && !rewarded) { 
        bal += AD_REWARD; 
        cnt++; 
        update(); 
        rewarded = true; 
        
        // MÃ¼kafat verildiyi an mesajÄ± gÃ¶ster
        msg.innerHTML = `<div class="alert success" style="display:block;">âœ… $${AD_REWARD.toFixed(3)} added!</div>`;
        
        // 2 saniye sonra (s=6-da) mesajÄ± sil
        setTimeout(() => {
            if(msg.innerHTML) { 
                msg.innerHTML = ''; 
            }
        }, 2000); 
    }
    
    if(s<=0){
      clearInterval(tInterval);
      
      isWatchingAd = false;
      update(); 
      
      // Timer bitdikde (0s) mesaj divini tamamilÉ™ temizleyirik
      msg.innerHTML = '';
    }
  },1000);
};

// --- TAPÅIRIQLAR MENTÄ°QÄ° (5s TIMER Ä°LE) ---
document.getElementById('joinBtn').onclick = () => {
    const btn = document.getElementById('joinBtn');
    if (localStorage.getItem(JOIN_KEY) || btn.disabled) {
        return; 
    }
    
    // Yeni pencerede aÃ§
    window.open(TG_CHANNEL_LINK, '_blank');
    
    btn.disabled = true;
    btn.classList.add('waiting'); 
    
    let s = TASK_WAIT_TIME;
    btn.textContent = `Waiting (${s}s)...`;

    const taskInterval = setInterval(() => {
        s--;
        btn.textContent = `Waiting (${s}s)...`;

        if (s <= 0) {
            clearInterval(taskInterval);

            // MÃ¼kafatÄ± ver
            bal += TASK_REWARD; 
            localStorage.setItem(JOIN_KEY, '1');
            
            update();
            
            btn.classList.remove('waiting');
            btn.classList.add('completed');
            btn.textContent = 'Completed';
            btn.disabled = true;
            
            alert(`Task Completed! $${TASK_REWARD.toFixed(2)} added.`);
        }
    }, 1000); 
};

// --- CÃœZDAN Ã‡IXARIÅ MENTÄ°QÄ° ---
const methodsList = document.getElementById('methodsList');
const walletForm = document.getElementById('walletForm');
const details = document.getElementById('details');
const amount = document.getElementById('amount');
const withdrawBtn = document.getElementById('withdrawBtn');
const alertBox = document.getElementById('alert');
const usdtMethodCard = document.getElementById('usdtMethodCard');
const backBtn = document.getElementById('backBtn');

// Metod seÃ§imi
usdtMethodCard.onclick = () => {
    methodsList.style.display = 'none';
    walletForm.style.display = 'block';
    details.value = '';
    amount.value = '';
    alertBox.style.display = 'none';
};

// Geri dÃ¼ymesi
backBtn.onclick = () => {
    walletForm.style.display = 'none';
    methodsList.style.display = 'block';
    alertBox.style.display = 'none';
};

// Ã‡Ä±xarÄ±ÅŸÄ±n iÅŸlenmesi
withdrawBtn.onclick = () => {
  const det = details.value.trim();
  const amt = parseFloat(amount.value);
  alertBox.style.display='none';

  if(!det){ showErr('Please enter your TON address.'); return; }
  // DÆYÄ°ÅÄ°KLÄ°K: Minimum $1.50 olaraq yenilÉ™ndi
  if(isNaN(amt) || amt < MIN_WITHDRAWAL){ showErr(`Minimum withdrawal is $${MIN_WITHDRAWAL.toFixed(2)}.`); return; }
  
  if(amt > bal){ showErr(`Insufficient balance. Current: $${bal.toFixed(4)}`); return; }

  // Ã‡Ä±xarÄ±ÅŸ simulyasiyasÄ±
  withdrawBtn.disabled = true;
  withdrawBtn.textContent = 'Processing...';

  setTimeout(() => {
    bal -= amt; 
    safeSet(BAL_KEY,bal);
    update();

    withdrawBtn.disabled = false;
    withdrawBtn.textContent = 'Withdraw';
    details.value = '';
    amount.value = '';

    showSuccess(`âœ… Withdrawal request for $${amt.toFixed(2)} sent! It will be executed within 48 hours.`);
    
    // UÄŸurlu Ã§Ä±xarÄ±ÅŸdan sonra 3 saniye gÃ¶zle ve metodlar siyahÄ±sÄ±na geri qayÄ±t
    setTimeout(() => {
        backBtn.click();
    }, 3000);

  }, 4000);
  
};

function showErr(msg){
  alertBox.textContent=msg;
  alertBox.className='alert error';
  alertBox.style.display='block';
}

function showSuccess(msg){
  alertBox.textContent=msg;
  alertBox.className='alert success';
  alertBox.style.display='block';
}

// --- SEHÄ°FE NAVÄ°QASÄ°YASI ---
function showPage(id, btn){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.menu button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  
  // Wallet sehifesine keÃ§id edende:
  if (id === 'walletPage') {
    // Balans kartÄ±nÄ± gÃ¶ster
    document.querySelector('#walletPage .balance-card').style.display = 'block';
    // Her zaman evvelce metodlar siyahÄ±sÄ±nÄ± gÃ¶ster (forma gizli olsun)
    methodsList.style.display = 'block';
    walletForm.style.display = 'none';
    alertBox.style.display = 'none';
  }
}


// --- Ä°LKÄ°N YÃœKLENME ---
update();
showPage('homePage', document.querySelector('.menu button:first-child')); 

// Loading Screen-i 3 saniyeden sonra baÄŸla
document.addEventListener('DOMContentLoaded', () => {
    const s=document.getElementById("loadingScreen");
    // SaytÄ± gÃ¶stermeden evvel mezmunun yÃ¼klenmesini gÃ¶zleyirik
    setTimeout(()=>{
      s.style.opacity="0"; 
      setTimeout(()=>s.style.display="none",700); 
    },3000); 
});
</script>
</body>
</html>
